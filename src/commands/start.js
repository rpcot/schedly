const { Keyboard } = require("grammy");
const { errorAnswer } = require("../utils/utils");
const { sendActionLog } = require("../utils/logging-functions");
const { checkAdminPerms, getGeneralMenuKeyboard } = require("../utils/users-functions");
const { developerId } = require("../config");

module.exports = {
    name: 'start',
    description: '–ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞',
    hide: false,
    async execute(bot, ctx) {

        if (ctx.chat.type !== 'private')
            return await errorAnswer(ctx, '–î–∞–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ <b>—Ç–æ–ª—å–∫–æ</b> –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö —Å –±–æ—Ç–æ–º', {
                deleteAfter: 5,
            });

        let text = `<b>‚ù§Ô∏è‚Äçüî• –ü—Ä–∏–≤–µ—Ç, —è SCHEDLY!</b>
        ‚ùì –Ø <b>–ø–æ–º–æ–≥—É —Ç–µ–±–µ</b> —Å –ø–æ–∏—Å–∫–æ–º –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ <b>—Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è</b> –∏ <b>–¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è</b>.
        
        üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ <b><a href="https://schedule.rpcot.ru/schedule">—Å–∞–π—Ç–µ</a></b> (<b>/site</b>) –∏–ª–∏ —Å –ø–æ–º–æ—â—å—é <b>–∫–æ–º–∞–Ω–¥</b>, —Å–ø–∏—Å–æ–∫ –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –ø—Ä–æ–ø–∏—Å–∞–≤ <b>/help</b>.

        ‚úèÔ∏è –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤ –¥–∞–Ω–Ω–æ–º –±–æ—Ç–µ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è <b>—É—á–µ–Ω–∏–∫–∞–º–∏</b>, –ø–æ—ç—Ç–æ–º—É —Ç—É—Ç –º—ã –º–æ–∂–µ–º —É–∫–∞–∑–∞—Ç—å <b>–∞–±—Å–æ–ª—é—Ç–Ω–æ –≤—Å–µ –¥–µ—Ç–∞–ª–∏</b>, –Ω–∞—á–∏–Ω–∞—è –æ—Ç <b>–¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è</b>, <b>–ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã—Ö —Ä–∞–±–æ—Ç</b> –∏ <b>–æ—Ç–º–µ–Ω–µ–Ω–Ω—ã—Ö</b> –∏–ª–∏ <b>–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—ã—Ö</b> —É—Ä–æ–∫–æ–≤ –∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞—è –∫–∞–∫–∏–º–∏-–ª–∏–±–æ <b>–≤–Ω–µ—É—Ä–æ—á–Ω—ã–º–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏</b>.
        ‚òùÔ∏è –ï—Å–ª–∏ <b>—Ç—ã</b> —Ö–æ—á–µ—à—å <b>–ø–æ–º–æ—á—å</b> –≤ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è, —Ç–æ <b>–∂–º–∏</b> –∫–Ω–æ–ø–∫—É <b>üöÄ –°—Ç–∞—Ç—å –∞–¥–º–∏–Ω–æ–º</b> –∏–ª–∏ –ø–∏—à–∏ <b>/go_admin</b>.

        üí° –ó–∞–º–µ—Ç–∏–ª <b>–æ—à–∏–±–∫—É</b> –∏–ª–∏ —Ö–æ—á–µ—à—å –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å <b>—á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ</b>?
        –¢—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—à—å —Å–≤—è–∑–∞—Ç—å—Å—è —Å <b>—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º –±–æ—Ç–∞</b> –≤ <b><a href="tg://user?id=${developerId}">–ª–∏—á–∫–µ</a></b> –∏–ª–∏ –∫–æ–º–∞–Ω–¥–æ–π <b>/feedback</b>.

        <b>–í —Å–æ–∑–¥–∞–Ω–∏–∏ –±–æ—Ç–∞ –ø—Ä–∏–Ω–∏–º–∞–ª–∏ —É—á–∞—Å—Ç–∏–µ:</b>
        @rpcotik ‚Ä¢ @linkas_sx
        
        <i>–¢–µ—Ö–Ω–∏—á–µ—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–æ—Ç–µ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–º–∞–Ω–¥–æ–π <b>/tech_info</b></i>

        <b>üíñ</b>
        `.replace(/  +/g, '');

        const keyboard = await getGeneralMenuKeyboard(ctx.from.id);

        await ctx.reply(text, {
            parse_mode: 'HTML',
            reply_markup: keyboard,
            message_effect_id: '5104841245755180586',
            disable_web_page_preview: true,
        });

        await sendActionLog(ctx, `–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω`);

    }
};
